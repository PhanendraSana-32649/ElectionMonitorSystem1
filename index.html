<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Election Monitoring System</title>

  <!-- ✅ PWA Configuration -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FF9933">
  <meta name="description" content="Transparent and Secure Election Monitoring System">

  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker
          .register("service-worker.js")
          .then(() => console.log("✅ Service Worker Registered"))
          .catch(err => console.error("❌ SW Registration Failed:", err));
      });
    }
  </script>

  <style>
    * {margin:0; padding:0; box-sizing:border-box;}
    :root {
      --saffron:#FF9933; --white:#fff; --green:#138808; --navy:#000080;
      --light-saffron:#FFB366; --dark-green:#0D5E06; --shadow:0 4px 15px rgba(0,0,0,0.1);
    }
    body {
      font-family:'Segoe UI',sans-serif;
      background:linear-gradient(135deg,#fff5e6,#e8f5e9);
      color:#2c3e50;
      line-height:1.6;
      min-height:100vh;
      overflow-x:hidden;
    }
    header {
      background:linear-gradient(180deg,var(--saffron) 0%,var(--white) 50%,var(--green) 100%);
      padding:1rem;
      text-align:center;
      position:sticky;
      top:0;
      z-index:10;
      box-shadow:var(--shadow);
    }
    header .title {background:rgba(0,0,128,.95); color:white; border-radius:15px; padding:1rem;}
    header h1 {font-size:clamp(1.5rem,4vw,2.5rem);}
    .tagline {font-size:0.9rem; color:var(--light-saffron);}
    .auth-screen,.main-app{display:flex; justify-content:center; align-items:center; flex-direction:column; padding:2rem;}
    .auth-card {background:white; padding:2rem; border-radius:20px; box-shadow:var(--shadow); max-width:400px; width:100%;}
    input,select,textarea{width:100%; padding:.75rem; border:2px solid #e0e0e0; border-radius:8px; font-size:1rem;}
    input:focus,select:focus,textarea:focus{border-color:var(--saffron); outline:none;}
    button {width:100%; padding:1rem; border:none; border-radius:8px; color:white; font-weight:bold; font-size:1rem;
      background:linear-gradient(135deg,var(--saffron),#ff6b35); cursor:pointer; margin-top:1rem;}
    button:hover{opacity:0.9;}
    .hidden{display:none;}
    nav {
      position:fixed; bottom:0; left:0; right:0; background:white;
      display:flex; justify-content:space-around; border-top:3px solid var(--saffron);
      box-shadow:0 -4px 10px rgba(0,0,0,0.1); z-index:5;
    }
    nav a{flex:1; text-align:center; text-decoration:none; color:#555; font-weight:600; padding:.75rem 0;}
    nav a.active{color:var(--saffron);}
    section{display:none; padding:2rem 1rem 90px; width:100%; max-width:800px;}
    section.active{display:block; animation:fadeIn .4s;}
    @keyframes fadeIn{from{opacity:0; transform:translateY(20px);}to{opacity:1; transform:translateY(0);}}
    @media(min-width:768px){
      nav{position:static; border:none; box-shadow:none; justify-content:center;}
      nav a{padding:1rem 2rem;}
      section{padding-bottom:2rem;}
    }
  </style>
</head>
<body>
  <header>
    <div class="title">
      <h1>Election Monitoring System</h1>
      <div class="tagline">Truth • Transparency • Trust</div>
    </div>
  </header>

  <!-- Auth Screen -->
  <div id="authScreen" class="auth-screen">
    <div class="auth-card">
      <h2>🔐 Secure Login</h2>
      <p>Verify with OTP</p>
      <form id="phoneForm">
        <label>Mobile Number</label>
        <div style="display:flex; gap:.5rem;">
          <div style="background:var(--saffron); color:white; padding:.75rem; border-radius:8px;">+91</div>
          <input type="tel" id="phoneNumber" maxlength="10" pattern="[6-9][0-9]{9}" required placeholder="9876543210">
        </div>
        <button type="submit">📨 Send OTP</button>
      </form>

      <form id="otpForm" class="hidden">
        <label>Enter OTP</label>
        <input type="text" id="otp" maxlength="6" required placeholder="000000">
        <label>Full Name</label>
        <input type="text" id="userName" required placeholder="Your Name">
        <label>Your Role</label>
        <select id="userRole" required>
          <option value="">Select Role</option>
          <option>Citizen/Voter</option>
          <option>Observer</option>
          <option>Election Official</option>
          <option>Media</option>
        </select>
        <button type="submit">✅ Verify & Login</button>
        <button type="button" id="resendOtpBtn" style="background:var(--green);">🔄 Resend OTP</button>
      </form>
    </div>
  </div>

  <!-- Main App -->
  <div id="mainApp" class="main-app hidden">
    <nav>
      <a href="#" data-section="dashboard" class="active">📊 Dashboard</a>
      <a href="#" data-section="report">📝 Report</a>
      <a href="#" data-section="results">📈 Results</a>
      <a href="#" data-section="verify">✅ Verify</a>
      <a href="#" data-section="track">🔍 Track</a>
    </nav>

    <section id="dashboard" class="active">
      <h2>Welcome to Dashboard</h2>
      <p id="userDisplay"></p>
      <p>📢 Transparency in every vote.</p>
      <button onclick="logout()">🚪 Logout</button>
    </section>

    <section id="report">
      <h2>📝 Report Issue</h2>
      <form id="complaintForm">
        <label>Issue Type</label>
        <select required>
          <option value="">Select issue</option>
          <option>Fraud</option>
          <option>Misinformation</option>
          <option>Technical Issue</option>
        </select>
        <label>Details</label>
        <textarea required></textarea>
        <button type="submit">🚀 Submit</button>
      </form>
    </section>

    <section id="results">
      <h2>📈 Live Results</h2>
      <p>Demo Data - Transparent Reporting</p>
    </section>

    <section id="verify">
      <h2>✅ Verification Center</h2>
      <p>Check report authenticity and status.</p>
    </section>

    <section id="track">
      <h2>🔍 Track Complaints</h2>
      <p>Track all your registered complaints easily.</p>
    </section>
  </div>

  <script>
    const phoneForm=document.getElementById('phoneForm');
    const otpForm=document.getElementById('otpForm');
    const mainApp=document.getElementById('mainApp');
    const authScreen=document.getElementById('authScreen');
    const otpInput=document.getElementById('otp');
    let generatedOtp="";

    phoneForm.addEventListener('submit',e=>{
      e.preventDefault();
      const phone=document.getElementById('phoneNumber').value.trim();
      if(!/^[6-9]\d{9}$/.test(phone)){alert("Enter valid phone number");return;}
      generatedOtp=Math.floor(100000+Math.random()*900000).toString();
      alert("Demo OTP: "+generatedOtp);
      phoneForm.classList.add('hidden');
      otpForm.classList.remove('hidden');
    });

    otpForm.addEventListener('submit',e=>{
      e.preventDefault();
      if(otpInput.value!==generatedOtp){alert("Invalid OTP!");return;}
      const name=document.getElementById('userName').value;
      const role=document.getElementById('userRole').value;
      if(!name||!role){alert("Enter all details");return;}
      document.getElementById('userDisplay').textContent=`👋 ${name} (${role})`;
      authScreen.classList.add('hidden');
      mainApp.classList.remove('hidden');
    });

    document.getElementById('resendOtpBtn').addEventListener('click',()=>{
      generatedOtp=Math.floor(100000+Math.random()*900000).toString();
      alert("New OTP: "+generatedOtp);
    });

    function logout(){
      mainApp.classList.add('hidden');
      authScreen.classList.remove('hidden');
      otpForm.classList.add('hidden');
      phoneForm.classList.remove('hidden');
    }

    // Navigation
    document.querySelectorAll('nav a').forEach(link=>{
      link.addEventListener('click',e=>{
        e.preventDefault();
        const sectionId=link.dataset.section;
        document.querySelectorAll('nav a').forEach(l=>l.classList.remove('active'));
        link.classList.add('active');
        document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
        document.getElementById(sectionId).classList.add('active');
      });
    });
  </script>
</body>
</html>
